---
# GENERATED DOCUMENTATION - DO NOT EDIT THIS FILE
title: "engine_forkchoiceUpdatedV4"
hide_table_of_contents: true
description: ""
---

import {TwoColumnLayout, InteractiveRequest, ResponseExample} from '@open-rpc/docusaurus-plugin/components';
import { useState } from 'react';

<TwoColumnLayout sidebar={<InteractiveRequest request={"{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"engine_forkchoiceUpdatedV4\",\n  \"params\": [\n    {\n      \"headBlockHash\": \"string\",\n      \"safeBlockHash\": \"string\",\n      \"finalizedBlockHash\": \"string\"\n    },\n    {\n      \"timestamp\": \"string\",\n      \"prevRandao\": \"string\",\n      \"suggestedFeeRecipient\": \"string\",\n      \"withdrawals\": [\n        {\n          \"index\": \"string\",\n          \"validatorIndex\": \"string\",\n          \"address\": \"string\",\n          \"amount\": \"string\"\n        }\n      ],\n      \"parentBeaconBlockRoot\": \"string\",\n      \"slotNumber\": \"string\"\n    }\n  ],\n  \"id\": 1\n}"} />}>
  # engine_forkchoiceUpdatedV4



  Updates the forkchoice state

  ## Parameters (by position)

  **Forkchoice state** `object` *required*

  Forkchoice state object V1

  ***

  <div>
    <details>
      <summary>
        Show `Forkchoice state` object
      </summary>

      #### `Forkchoice state` fields

      * **headBlockHash** `string`

        Head block hash

        *Match pattern:* `^0x[0-9a-f]{64}$`

        ***

      * **safeBlockHash** `string`

        Safe block hash

        *Match pattern:* `^0x[0-9a-f]{64}$`

        ***

      * **finalizedBlockHash** `string`

        Finalized block hash

        *Match pattern:* `^0x[0-9a-f]{64}$`

        ***

      * **additionalProperties** `true`

        ***
    </details>
  </div>

  **Payload attributes** `object`

  Payload attributes object V4

  ***

  <div>
    <details>
      <summary>
        Show `Payload attributes` object
      </summary>

      #### `Payload attributes` fields

      * **timestamp** `string`

        Timestamp

        *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

        ***

      * **prevRandao** `string`

        Previous randao value

        *Match pattern:* `^0x[0-9a-f]{64}$`

        ***

      * **suggestedFeeRecipient** `string`

        Suggested fee recipient

        *Match pattern:* `^0x[0-9a-fA-F]{40}$`

        ***

      * **withdrawals** `array<object>`

        Withdrawal object V1

        ***

        <div>
          <details>
            <summary>
              Show `withdrawals` object
            </summary>

            #### `withdrawals` fields

            * **index** `string` *required*

              Withdrawal index

              *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

              ***

            * **validatorIndex** `string` *required*

              Validator index

              *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

              ***

            * **address** `string` *required*

              Withdrawal address

              *Match pattern:* `^0x[0-9a-fA-F]{40}$`

              ***

            * **amount** `string` *required*

              Withdrawal amount

              *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

              ***

            * **additionalProperties** `true`

              ***
          </details>
        </div>

      * **parentBeaconBlockRoot** `string`

        Parent beacon block root

        *Match pattern:* `^0x[0-9a-f]{64}$`

        ***

      * **slotNumber** `string`

        Slot number

        *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

        ***

      * **additionalProperties** `true`

        ***
    </details>
  </div>

  ## Result

  **Response object** `object`

  Forkchoice updated response

  ***

  <div>
    <details>
      <summary>
        Show `Response object` object
      </summary>

      #### `Response object` fields

      * **payloadStatus** `object` *required*

        Payload status

        ***

        <div>
          <details>
            <summary>
              Show `payloadStatus` object
            </summary>

            #### `payloadStatus` fields

            * **status** `string` *required*

              Set of possible values is restricted to VALID, INVALID, SYNCING

              *Allowed values:* `VALID` `INVALID` `SYNCING`

              ***

            * **latestValidHash** `string`

              The hash of the most recent valid block

              *Match pattern:* `^0x[0-9a-f]{64}$`

              ***

            * **validationError** `string`

              Validation error message

              ***

            * **additionalProperties** `true`

              ***
          </details>
        </div>

      * **payloadId** `string`

        Payload id

        *Match pattern:* `^0x[0-9a-f]{16}$`

        ***

      * **additionalProperties** `true`

        ***
    </details>
  </div>

  ## Errors

  <details>
    <summary>
      Error code: -38002
    </summary>

    * **code**

      -38002
    * **message**

      Invalid forkchoice state
  </details>

  <details>
    <summary>
      Error code: -38003
    </summary>

    * **code**

      -38003
    * **message**

      Invalid payload attributes
  </details>

  <details>
    <summary>
      Error code: -32602
    </summary>

    * **code**

      -32602
    * **message**

      Invalid params
  </details>

  <details>
    <summary>
      Error code: -38005
    </summary>

    * **code**

      -38005
    * **message**

      Unsupported fork
  </details>
</TwoColumnLayout>
