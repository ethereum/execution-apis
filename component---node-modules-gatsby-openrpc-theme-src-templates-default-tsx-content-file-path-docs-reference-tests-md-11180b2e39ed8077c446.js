"use strict";(self.webpackChunkexecution_apis=self.webpackChunkexecution_apis||[]).push([[5436],{35998:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(55569),r=n(96540);function s(e){const t=Object.assign({h1:"h1",p:"p",a:"a",code:"code",h2:"h2",pre:"pre",h3:"h3"},(0,a.R)(),e.components);return r.createElement(r.Fragment,null,r.createElement(t.h1,{id:"tests"},"Tests"),"\n",r.createElement(t.p,null,"The Execution API has a comprehensive test suite to verify conformance of\nclients. The tests in this repository are loaded into the ",r.createElement(t.a,{href:"https://github.com/ethereum/hive"},r.createElement(t.code,null,"hive"))," test\nsimulator ",r.createElement(t.a,{href:"https://github.com/ethereum/hive/tree/master/simulators/ethereum/rpc-compat"},r.createElement(t.code,null,"rpc-compat"))," and validated against every major client."),"\n",r.createElement(t.p,null,"The test suite is run daily and results are always available ",r.createElement(t.a,{href:"https://hive.ethpandaops.io"},"here"),"\nunder the tag ",r.createElement(t.code,null,"rpc-compat"),"."),"\n",r.createElement(t.p,null,"To learn more about the ",r.createElement(t.code,null,"rpc-compat")," simulator, please see its\n",r.createElement(t.a,{href:"https://github.com/ethereum/hive/tree/master/simulators/ethereum/rpc-compat"},"documentation"),"."),"\n",r.createElement(t.h2,{id:"format"},"Format"),"\n",r.createElement(t.p,null,"Tests are written to describe the round-trip of a single request-response\ncycle. A test starts with a ",r.createElement(t.code,null,">> ")," denoting the request portion. It is delimited\nby ",r.createElement(t.code,null,"\\n")," and then a ",r.createElement(t.code,null,"<< ")," is used to denote the response. All together, it looks\nsomething like this:"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-javascript"},'>> {"jsonrpc":"2.0","id":1,"method":"eth_blockNumber"}\n<< {"jsonrpc":"2.0","id":1,"result":"0x3"}\n')),"\n",r.createElement(t.p,null,"For organizational purposes, tests are stored at a path following the template\n",r.createElement(t.code,null,"tests/{method-name}/{test-name}.io"),". The path does not affect the validity of\nthe test and is only used to describe what the test is aiming to test."),"\n",r.createElement(t.h2,{id:"generation"},"Generation"),"\n",r.createElement(t.p,null,"Test generation can be broken down into two parts. First is the generation of a\nchain against which tests will be executed. Second is executing the actual\ntests and recording their round-trip."),"\n",r.createElement(t.p,null,"Although the ",r.createElement(t.code,null,"io")," format is agnostic to the generation tool, it is preferred\ntest contributors use the generation tool ",r.createElement(t.a,{href:"https://github.com/lightclient/rpctestgen"},r.createElement(t.code,null,"rpctestgen")),".\n",r.createElement(t.code,null,"rpctestgen")," takes care of both pieces of test generation."),"\n",r.createElement(t.h3,{id:"chain-making"},"Chain making"),"\n",r.createElement(t.p,null,"Inside the ",r.createElement(t.code,null,"tests")," directory are three chain-related files that test authors\nmust be aware of."),"\n",r.createElement(t.p,null,r.createElement(t.code,null,"genesis.json")," - a standard genesis config file in the go-ethereum format.\n",r.createElement(t.code,null,"chain.rlp"),"    - a newline-delimited list of blocks making up the test chain.\n",r.createElement(t.code,null,"bad.rlp"),"      - a newline-delimited list of blocks that are sealed and\nconduct an invalid transition."),"\n",r.createElement(t.p,null,"Generally, test authors should ingest ",r.createElement(t.code,null,"genesis.json")," and ",r.createElement(t.code,null,"chain.rlp")," and\ngenerate tests against the head of that chain. If a test requires a certain\ncondition exist in the chain that does not currently exist, then the author may\nappend a block to head of the chain and regenerate all tests against the new\n",r.createElement(t.code,null,"chain.rlp"),"."),"\n",r.createElement(t.h3,{id:"test-generation"},"Test Generation"),"\n",r.createElement(t.p,null,"Once a test chain has been created, test authors may move on to generating the\nactual test fixtures. To do so, authors must follow the format defined above.\nTests should be limited to a single round-trip interaction. At this time, this\nprecludes subscription methods from being tested."),"\n",r.createElement(t.p,null,"It is also recommended that test authors test their tests. Each interaction\nshould be validated against the expected values. Due to the number of fixtures\ngenerated, it is easy accept incorrect responses."),"\n",r.createElement(t.p,null,"A good final verification of tests is to run them in the hive simulator\n",r.createElement(t.a,{href:"https://github.com/ethereum/hive/tree/master/simulators/ethereum/rpc-compat"},r.createElement(t.code,null,"rpc-compat")),". More information on how to run custom tests in the\nsimulator can be found with there."))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.R)(),e.components);return t?r.createElement(t,e,r.createElement(s,e)):s(e)},l=n(24794),i=n(28453),c=n(33551),h=n(87164),m=n(64155),u=n(91890);const d={h1:e=>r.createElement(c.A,Object.assign({variant:"h1"},e)),h2:e=>r.createElement(c.A,Object.assign({variant:"h2"},e)),h3:e=>r.createElement(c.A,Object.assign({variant:"h3"},e)),h4:e=>r.createElement(c.A,Object.assign({variant:"h4"},e)),h5:e=>r.createElement(c.A,Object.assign({variant:"h5"},e)),h6:e=>r.createElement(c.A,Object.assign({variant:"h6"},e)),p:e=>r.createElement(c.A,Object.assign({paragraph:!0},e)),a:e=>r.createElement(l.Link,e),pre:e=>r.createElement(h.A,Object.assign({component:"pre",sx:{overflowX:"auto",p:2,bgcolor:"background.paper",borderRadius:1,mb:2}},e)),code:e=>r.createElement(h.A,Object.assign({component:"code",sx:{fontFamily:"monospace",p:.5,borderRadius:.5}},e))},p=e=>{let{children:t,pageContext:n}=e;return r.createElement(r.Fragment,null,r.createElement(m.A,{elevation:0,sx:{p:3,mb:4}},r.createElement(i.xA,{components:d},t),r.createElement(u.A,{next:n.next,prev:n.prev})))};function g(e){return r.createElement(p,e,r.createElement(o,e))}}}]);
//# sourceMappingURL=component---node-modules-gatsby-openrpc-theme-src-templates-default-tsx-content-file-path-docs-reference-tests-md-11180b2e39ed8077c446.js.map