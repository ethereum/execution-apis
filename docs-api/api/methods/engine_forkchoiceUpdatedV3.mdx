---
# GENERATED DOCUMENTATION - DO NOT EDIT THIS FILE
title: "engine_forkchoiceUpdatedV3"
hide_table_of_contents: true
description: ""
---

import {TwoColumnLayout, InteractiveRequest, ResponseExample} from 'open-rpc-docusaurus-plugin-beta/components';
import { useState } from 'react';

<TwoColumnLayout sidebar={<InteractiveRequest request={"{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"engine_forkchoiceUpdatedV3\",\n  \"params\": {\n    \"Forkchoice state\": {\n      \"headBlockHash\": \"string\",\n      \"safeBlockHash\": \"string\",\n      \"finalizedBlockHash\": \"string\"\n    },\n    \"Payload attributes\": {\n      \"timestamp\": \"string\",\n      \"prevRandao\": \"string\",\n      \"suggestedFeeRecipient\": \"string\",\n      \"withdrawals\": [\n        {\n          \"index\": \"string\",\n          \"validatorIndex\": \"string\",\n          \"address\": \"string\",\n          \"amount\": \"string\"\n        }\n      ],\n      \"parentBeaconBlockRoot\": \"string\"\n    }\n  },\n  \"id\": 1\n}"} />}>
  <div>
    # engine\_forkchoiceUpdatedV3



    Updates the forkchoice state

    <div>
      ## Parameters (by position)

      **Forkchoice state** `object` *required*

      Forkchoice state object V1

      ***

      <div>
        <details>
          <summary>
            Show `Forkchoice state` object
          </summary>

          #### `Forkchoice state` fields

          * **headBlockHash** `string`

            Head block hash

            *Match pattern:* `^0x[0-9a-f]{64}$`

            ***

          * **safeBlockHash** `string`

            Safe block hash

            *Match pattern:* `^0x[0-9a-f]{64}$`

            ***

          * **finalizedBlockHash** `string`

            Finalized block hash

            *Match pattern:* `^0x[0-9a-f]{64}$`

            ***
        </details>
      </div>

      **Payload attributes** `object`

      Payload attributes object V3

      ***

      <div>
        <details>
          <summary>
            Show `Payload attributes` object
          </summary>

          #### `Payload attributes` fields

          * **timestamp** `string`

            Timestamp

            *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

            ***

          * **prevRandao** `string`

            Previous randao value

            *Match pattern:* `^0x[0-9a-f]{64}$`

            ***

          * **suggestedFeeRecipient** `string`

            Suggested fee recipient

            *Match pattern:* `^0x[0-9a-fA-F]{40}$`

            ***

          * **withdrawals** `array<object>`

            Withdrawal object V1

            ***

            <div>
              <details>
                <summary>
                  Show `withdrawals` object
                </summary>

                #### `withdrawals` fields

                * **index** `string` *required*

                  Withdrawal index

                  *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

                  ***

                * **validatorIndex** `string` *required*

                  Validator index

                  *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

                  ***

                * **address** `string` *required*

                  Withdrawal address

                  *Match pattern:* `^0x[0-9a-fA-F]{40}$`

                  ***

                * **amount** `string` *required*

                  Withdrawal amount

                  *Match pattern:* `^0x(0|[1-9a-f][0-9a-f]{0,15})$`

                  ***
              </details>
            </div>

          * **parentBeaconBlockRoot** `string`

            Parent beacon block root

            *Match pattern:* `^0x[0-9a-f]{64}$`

            ***
        </details>
      </div>
    </div>

    <div>
      ## Result

      **Response object** `object`

      Forkchoice updated response

      ***

      <div>
        <details>
          <summary>
            Show `Response object` object
          </summary>

          #### `Response object` fields

          * **payloadStatus** `object` *required*

            Payload status

            ***

            <div>
              <details>
                <summary>
                  Show `payloadStatus` object
                </summary>

                #### `payloadStatus` fields

                * **status** `string` *required*

                  Set of possible values is restricted to VALID, INVALID, SYNCING

                  *Allowed values:* `VALID` `INVALID` `SYNCING`

                  ***

                * **latestValidHash** `string`

                  The hash of the most recent valid block

                  *Match pattern:* `^0x[0-9a-f]{64}$`

                  ***

                * **validationError** `string`

                  Validation error message

                  ***
              </details>
            </div>

          * **payloadId** `string`

            Payload id

            *Match pattern:* `^0x[0-9a-f]{16}$`

            ***
        </details>
      </div>
    </div>

    <div>
      ## Errors

      <details>
        <summary>
          Error code: -38002
        </summary>

        * **code**

          -38002
        * **message**

          Invalid forkchoice state
      </details>

      <details>
        <summary>
          Error code: -38003
        </summary>

        * **code**

          -38003
        * **message**

          Invalid payload attributes
      </details>

      <details>
        <summary>
          Error code: -32602
        </summary>

        * **code**

          -32602
        * **message**

          Invalid params
      </details>

      <details>
        <summary>
          Error code: -38005
        </summary>

        * **code**

          -38005
        * **message**

          Unsupported fork
      </details>
    </div>

    <div>
      ## Examples

      <details>
        <summary>
          engine\_forkchoiceUpdatedV3 example
        </summary>

        #### Request

        ```json
        {
          "params": [
            {
              "headBlockHash": "0x3559e851470f6e7bbed1db474980683e8c315bfce99b2a6ef47c057c04de7858",
              "safeBlockHash": "0x3559e851470f6e7bbed1db474980683e8c315bfce99b2a6ef47c057c04de7858",
              "finalizedBlockHash": "0x3b8fb240d288781d4aac94d3fd16809ee413bc99294a085798a589dae51ddd4a"
            },
            {
              "timestamp": "0x64e7785b",
              "prevRandao": "0xc130d5e63c61c935f6089e61140ca9136172677cf6aa5800dcc1cf0a02152a14",
              "suggestedFeeRecipient": "0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b",
              "withdrawals": [
                {
                  "index": "0xf0",
                  "validatorIndex": "0xf0",
                  "address": "0x00000000000000000000000000000000000010f0",
                  "amount": "0x1"
                },
                {
                  "index": "0xf1",
                  "validatorIndex": "0xf1",
                  "address": "0x00000000000000000000000000000000000010f1",
                  "amount": "0x1"
                }
              ],
              "parentBeaconBlockRoot": "0x11f780a954bcba8889998e4e61deaae6388dd2391e9c810bd9c94962cc1eadc1"
            }
          ]
        }
        ```

        #### Response

        ```json
        {
          "payloadStatus": {
            "status": "VALID",
            "latestValidHash": "0x3559e851470f6e7bbed1db474980683e8c315bfce99b2a6ef47c057c04de7858",
            "validationError": null
          },
          "payloadId": "0x0000000021f32cc1"
        }
        ```
      </details>
    </div>
  </div>
</TwoColumnLayout>
